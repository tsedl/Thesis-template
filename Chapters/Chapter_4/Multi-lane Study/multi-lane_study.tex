% !TEX TS-program = pdflatex
% !TEX encoding = UTF-8 Unicode

% This is a simple template for a LaTeX document using the "article" class.
% See "book", "report", "letter" for other types of document.

\documentclass[11pt]{article} % use larger type; default would be 10pt

\usepackage[utf8]{inputenc} % set input encoding (not needed with XeLaTeX)

%%% Examples of Article customizations
% These packages are optional, depending whether you want the features they provide.
% See the LaTeX Companion or other references for full information.

%%% PAGE DIMENSIONS
\usepackage{geometry} % to change the page dimensions
\geometry{a4paper} % or letterpaper (US) or a5paper or....
% \geometry{margin=2in} % for example, change the margins to 2 inches all round
% \geometry{landscape} % set up the page for landscape
%   read geometry.pdf for detailed page layout information

\usepackage{graphicx} % support the \includegraphics command and options

% \usepackage[parfill]{parskip} % Activate to begin paragraphs with an empty line rather than an indent

%%% PACKAGES
\usepackage{booktabs} % for much better looking tables
\usepackage{array} % for better arrays (eg matrices) in maths
\usepackage{paralist} % very flexible & customisable lists (eg. enumerate/itemize, etc.)
\usepackage{verbatim} % adds environment for commenting out blocks of text & for better verbatim
\usepackage{subfig} % make it possible to include more than one captioned figure/table in a single float
% These packages are all incorporated in the memoir class to one degree or another...

%%% HEADERS & FOOTERS
\usepackage{fancyhdr} % This should be set AFTER setting up the page geometry
\pagestyle{fancy} % options: empty , plain , fancy
\renewcommand{\headrulewidth}{0pt} % customise the layout...
\lhead{}\chead{}\rhead{}
\lfoot{}\cfoot{\thepage}\rfoot{}

%%% SECTION TITLE APPEARANCE
\usepackage{sectsty}
\allsectionsfont{\sffamily\mdseries\upshape} % (See the fntguide.pdf for font help)
% (This matches ConTeXt defaults)

%%% ToC (table of contents) APPEARANCE
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography in the ToC
\usepackage[titles,subfigure]{tocloft} % Alter the style of the Table of Contents
\renewcommand{\cftsecfont}{\rmfamily\mdseries\upshape}
\renewcommand{\cftsecpagefont}{\rmfamily\mdseries\upshape} % No bold!

%%% END Article customizations

%%% The "real" document content comes below...

\author{Edward Lambert}
\title{Multi-Lane Automated Intersection Management}
%\date{} % Activate to display a given date or no date (if empty),
         % otherwise the current date is printed 

\begin{document}
\maketitle
\section{Aim}
To compare the performance of an intersection manager with fixed First-In-First-Out (FIFO) crossing order with a published method based on a non-convex optimization with Linear objective and Quadratic constraints (Quad\_constr), in which the crossing order can be varied to improve the objective, which is to minimize the sum of crossing time for a set number of participants. The numerical performance of the intersection manager is also important for its use as a real-time safety critical system, including the scaling with increasing numbers of approaching vehicles. 

\section{Hypothesis}
The choice of crossing order has the potential to significantly reduce total travel time in a multi-lane intersection by allowing sets of vehicles whose path do not cross to cross the intersection together. For this reason the Quad\_constr method is expected to produce solutions with a lower total travel time.

Otherwise, both approaches make the same simplifying assumptions about the constraints, maximize the same objective by varying the same control waypoints. So the Quad\_constr approach should match the FIFO performance if that is the best ordering, or in other cases improve upon it.

The execution time is expected to be shorter and more consistent for the FIFO approach, as this produces a linear program which can be solved efficiently. The Quad\_constr approach must search a non-convex space, so it is expected to take longer to solve. It is also expected to have an unpredictable solution time, which may limit the scale at which is can be applied, and possibly rule out its use as a  standalone collision avoidance method at any scale.

\section{Method}
The two intersection managers were implemented in Python with an identical messaging interface to communicate with a collection of AGV controllers with simplified dynamics. 

The FIFO speeds were found with scipy.optimize.linprog and the vehicles ordered with the Python 3.7.6 function sorted

The Quad\_constr speeds were found with scipy.optimize.minimize given the analytical Jacobian and Hessian.
The speeds were converted into timed waypoints which the AGV controllers must meet as closely as possible. This conversion takes the constant speed solution for the intersection problem and retains only the safety critical part at the entry and exit of the conflict zone to pass to the AGV controllers. Vehicles with second order dynamics were also simulated.

The first test is inspired by the published results in Digani 2019, showing the improvement of intersection management similar to Quad\_constr over decentralized negotiation. The tests took place on a close duplicate of two realistic intersection layouts with fixed direction lanes.

Over ten runs, one AGV was initialized at each entrance, and assigned a random exit.   The clearing time Tclearing for the last vehicle to leave the intersection is recorded in each run. The execution time to calculate the optimal waypoint times for every vehicle was calculated at the start Texec. The worst delay for a single AGV compared to its free flow time to cross the intersection Twait is also recorded.
Twait is defined somewhat differently to Digani 2019. In that paper the metric captures the time spent stationary so the optimal method has zero waiting time in every case. The waiting time is averaged over different AGV in each run, and the worst run average is recorded for that layout.
In the table below Twait = crossing\_time - PathLength/max\_speed so the figure is non zero even for optimal methods. It represents the delay caused by the intersection compared to free flow speed. In some cases it is slightly negative, because vehicles can exceed the maximum speed to meet the waypoints given by the intersection manager.   

\end{document}




